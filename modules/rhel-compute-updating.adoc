// Module included in the following assemblies:
//
// * updating/updating-cluster-rhel-compute.adoc

[id="rhel-compute-updating_{context}"]
= Updating RHEL compute machines in your cluster

After you update your cluster, you must update the Red Hat Enterprise Linux (RHEL)
compute machines in your cluster.

.Prerequisites

* You updated your cluster.
+
[IMPORTANT]
====
Because the RHEL machines require assets that are generated by the cluster to
complete the update process, you must update the cluster before you update
the RHEL compute machines in it.
====

* You have access to the machine that you used to add the RHEL compute machines
cluster. You must have access to the `hosts` Ansible inventory file that defines
your RHEL machines and the `upgrade` playbook.

.Procedure

. Stop and disable firewalld on the host:
+
----
# systemctl disable firewalld.service
# systemctl stop firewalld.service
----
+
[NOTE]
====
You must not enable firewalld later. If you do, you cannot access {product-title} logs on the worker.
====

. Review your Ansible inventory file at `/<path>/inventory/hosts`
and ensure that all of your compute, or worker, machines are listed in the
`[workers]` section, as shown in the following example:
+
----
[all:vars]
ansible_user=root
#ansible_become=True

openshift_kubeconfig_path="~/.kube/config"

[workers]
mycluster-worker-0.example.com
mycluster-worker-1.example.com
mycluster-worker-2.example.com
mycluster-worker-3.example.com
----
+
If all of your RHEL compute machines are not listed in the `[workers]` section,
you must move them to that section.

. Change to the `openshift-ansible` directory and run the `upgrade` playbook:
+
----
$ cd /usr/share/ansible/openshift-ansible
$ ansible-playbook -i /<path>/inventory/hosts playbooks/upgrade.yml <1>
----
<1> For `<path>`, specify the path to the Ansible inventory file
that you created.
